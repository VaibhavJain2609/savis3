<app-navbar></app-navbar>
<div class="two-proportions">
  <h1 class="text-center">Two Proportions Confidence Interval</h1>

  <h2>1. Input Data: </h2>
  <input type="checkbox" style="float:right" checked>
  <div id="input-section" class="section">
    <div class="lhs">
      <table>
        <thead>
          <tr>
            <td></td>
            <td class="desc text-center">Group A</td>
            <td class="desc text-center">Group B</td>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="desc">Successes</td>
            <td><input class="text-center" type="number" id="a-success" value="0" min="0" step="1" [(ngModel)]="numASuccesses"></td>
            <td><input class="text-center" type="number" id="b-success" value="0" min="0" step="1" [(ngModel)]="numBSuccesses"></td>
          </tr>
          <tr>
            <td class="desc">Failures</td>
            <td><input class="text-center" type="number" id="a-failure" value="0" min="0" step="1" [(ngModel)]="numAFailures"> </td>
            <td><input class="text-center" type="number" id="b-failure" value="0" min="0" step="1" [(ngModel)]="numBFailures"> </td>
          </tr>
        </tbody>
      </table>

      <br>
      <button class="btn" (click)="loadData()">Load Data</button>
      <hr>

      <div class="stats">
        <div>
          <span>Proportions of Success in Group A (p<sub>A</sub>):</span>
          <span>{{ inputProportionsGroupA }}</span>
        </div>
        <div>
          <span>Proportions of Success in Group B (p<sub>b</sub>):</span>
          <span>{{ inputProportionsGroupB }}</span>
        </div>
        <div>
          <span>Difference of Proportions (p<sub>A</sub> - p<sub>B</sub>):</span>
          <span>{{ inputDifferenceProportions }}</span>
        </div>
      </div>
    </div>

    <div class="rhs">
      <table style="margin-left: 3em">
        <tr>
          <td style="text-align: right;"><span summary="numAFailure" summaryint>{{numAFailures}}</span> Failures</td>
          <td rowspan="2" colspan="2">
            
            <div class="chart-wrap">
              <canvas #chart1></canvas>
            </div>

            <!-- <div style="width:30%; margin: auto">
              <label for="multiply-group1" style="font-size: 13px" [(ngModel)]="factor">Increase by</label>
              <input type="number" step="1" min="10" value="10" id="increment" style = "width: 20%; text-align: center">
            </div>
            
            <div style="width: 10%; margin: auto">
              <button class="incrementButton" id="incrementButton"><span class="material-icons">add_circle</span></button>
            </div> -->
          </td>
          <td><span summary="numBFailure" summaryint>{{numBFailures}}</span> Failures</td>
        </tr>
        <tr>
          <td style="text-align: right;"><span summary="numASuccess" summaryint>{{numASuccesses}}</span> Successes</td>
          <td><span summary="numBSuccess" summaryint>{{numBSuccesses}}</span> Successes</td>
        </tr>
      </table>
    </div>

  </div>

  <div class="green-line"></div>

  <h2>2. Simulations</h2>
  <input type="checkbox" style="float:right" checked>
  <div class="section">
    <div class="lhs">
      <label>
        Number of Simulations:
        <input id="num-simulations" type="number" min="1" value="1" max="1000" [(ngModel)]="numSimulations">
      </label>
      <button class="btn" (click)="runSimulation()">Run Simulations</button>
      <div class="stats">
        <div>
          <span>Proportion of Successes Randomized to Group A (p<sub>A</sub>):</span>
          <span>{{ simulationProportionGroupA }}</span>
        </div>
        <div>
          <span>Proportion of Successes Randomized to Group B (p<sub>B</sub>):</span>
          <span>{{ simulationProportionGroupB }}</span>
        </div>
        <div>
          <span>Difference of Proportions (p<sub>A</sub> - p<sub>B</sub>):</span>
          <span>{{ simulationDifferenceProportions }}</span>
        </div>
      </div>
    </div>

    <div class="rhs">
      <h3 style="margin-left: 3em">Last Sample Drawn</h3>
      <table style="margin-left: 3em;">
        <tr>
          <td style="text-align: right;"><span summary="sampleAFailure">{{simAFailures}}</span> Failures</td>
          <td rowspan="2" colspan="2">
            <div class="chart-wrap">
              <canvas #chart2></canvas>
            </div>
          </td>
          <td><span summary="sampleBFailure">{{simBFailures}}</span> Failures</td>
        </tr>
        <tr>
          <td style="text-align: right;"><span summary="sampleASuccess">{{simASuccesses}}</span> Successes</td>
          <td><span summary="sampleBSuccess">{{simBSuccesses}}</span> Successes</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="green-line"></div>

  <h2>3. Sampling Distribution of Difference of Proportions</h2>
  <input type="checkbox" style="float:right" checked>
  <div class="section flex-row">
    <div class="lhs">
      <div class="flex flex-col items-center justify-center">
        <div>
            <label for="confidence-level">Confidence Level {{confidenceLevel}} %</label>
        </div>
        <input type="range" min="1" max="100" class="w-1/2" step="1" id="confidence-level" [(ngModel)]="confidenceLevel">
        <button type="button" class="btn w-1/2" id="buildCI" (click)="updateLastChart()">Build</button>
    </div>

      <div class="stats">
        <div>
          <span>Difference of Proportions in Original Data:</span>
          <span>{{ inputDifferenceProportions }}</span>
        </div>
        <div>
          <span>Mean of Sample Differences:</span>
          <span>{{simMean}}</span>
        </div>
        <div>
          <span>Standard Deviation of Sample Differences:</span>
          <span>{{simStdDev}}</span>
        </div>
        <div>
          <span>Lower Bound:</span>
          <span>{{ lowerBound }}</span>
        </div>
        <div>
          <span>Upper Bound:</span>
          <span>{{ upperBound }}</span>
        </div>
        <div>
          <span>Total Samples:</span>
          <span>{{simTotal}}</span>
        </div>
      </div>
    </div>
    <div class="rhs-chart3">
      <canvas #chart3 class="half-height"></canvas>
    </div>
  </div>


</div>
<app-footer></app-footer>



