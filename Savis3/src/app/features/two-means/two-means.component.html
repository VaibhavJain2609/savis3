<app-navbar></app-navbar>
<div class="p-4">
  <h1 class="text-xl font-bold text-center my-5">
    {{ "two_means.Two_Means_Hypothesis_Testing" | translate }}
  </h1>
  <div class="flex justify-between">
    <h2 class="text-xl font-bold">{{ "two_means.Enter_Data" | translate }}</h2>
    <input
      type="checkbox"
      (change)="toggleSection($event, 'sectionOne')"
      checked
    />
  </div>
  <div class="flex gap-3" [ngClass]="sections.sectionOne ? '' : 'hidden'">
    <div class="w-3/12">
      <div class="w-full">
        <div class="border border-gray-300 rounded-md">
          <select
            (change)="sampleSelect($event)"
            class="w-full border-t-0 border-l-0 border-r-0 border-b focus:outline-none rounded-lg p-1"
          >
            <option disabled selected>
              {{ "two_means.Select_Sample_Data" | translate }}
            </option>
            <option value="sample1">
              {{ "two_means.Sample_1" | translate }}
            </option>
            <option value="sample2">
              {{ "two_means.Sample_2" | translate }}
            </option>
          </select>
          <textarea
            (drop)="onDrop($event)"
            [(ngModel)]="csvraw"
            class="text-sm w-full p-1.5 placeholder:text-xs focus:outline-none"
            rows="5"
            placeholder="Enter or Drop CSV with first column as group number (1 or 2) and second column as variable. No colunm names (see sample data in drop down menu)"
          ></textarea>
        </div>
        <button
          (click)="loadData()"
          class="mt-1 border bg-primary text-white px-7 py-1.5 text-sm font-medium rounded-lg w-full"
        >
          {{ "two_means.Load_Data" | translate }}
        </button>
        <button
          (click)="onResetChart()"
          class="mt-1 border bg-primary text-white px-7 py-1.5 text-sm font-medium rounded-lg w-full"
        >
          Reset
        </button>
        <label
          class="mt-1 block text-center border bg-primary text-white px-7 py-1.5 text-sm font-medium rounded-lg w-full"
          for="fileInput"
        >
          {{ "two_means.Upload_Data_File" | translate }}
        </label>
        <input
          type="file"
          id="fileInput"
          (change)="onFileSelected($event)"
          style="display: none"
        />
      </div>
      <div class="text-sm font-medium mb-1">
        <div class="flex justify-between">
          <span>{{ "two_means.Size_n_(Group_1):" | translate }}</span>
          <span>{{ dataSize1 }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Mean_1_(Group_1):" | translate }} </span>
          <span>{{ datamean1 }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Size_n_(Group_2):" | translate }}</span>
          <span> {{ dataSize2 }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Mean_2_(Group_2):" | translate }}</span>
          <span>{{ datamean2 }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_means.Difference_of_Means_(Mean_1_-_Mean_2):" | translate
          }}</span>
          <span>{{ mean_diff }}</span>
        </div>
      </div>
    </div>
    <div class="w-9/12">
      <div style="display: block">
        <div class="chart-wrap">
          <canvas id="data-chart-1" height="220"></canvas>
        </div>
      </div>
      <div style="display: block">
        <div class="chart-wrap">
          <canvas id="data-chart-2" height="220"></canvas>
        </div>
      </div>
    </div>
  </div>
  <div class="flex justify-between">
    <h2 class="text-xl font-bold">
      {{ "two_means.Run_Simulations" | translate }}
    </h2>
    <input
      type="checkbox"
      checked
      (change)="toggleSection($event, 'sectionTwo')"
    />
  </div>
  <div class="flex gap-3" [ngClass]="sections.sectionTwo ? '' : 'hidden'">
    <div class="w-3/12">
      <h3 class="font-bold"># of Simulations</h3>
      <input
        [(ngModel)]="numofSem"
        [disabled]="!activateSim"
        class="w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg ng-untouched ng-pristine ng-valid"
        type="number"
        value="1"
        min="1"
        max="100"
      />
      <button
        (click)="runSim()"
        *ngIf="activateSim"
        class="mt-1 border bg-primary disabled: text-white px-7 py-1.5 text-sm font-medium rounded-lg w-full"
      >
        {{ "two_means.Run_Simulation" | translate }}
      </button>
      <button
        [disabled]="true"
        *ngIf="!activateSim"
        class="mt-1 border bg-gray-400 text-gray-700 px-7 py-1.5 text-sm font-medium rounded-lg w-full"
      >
        {{ "two_means.Run_Simulation" | translate }}
      </button>
      <div class="text-sm font-medium mb-1">
        <div class="flex justify-between">
          <span
            >{{ "two_means.Mean_of_Randomized_Sample_to_Group_1:" | translate }}
          </span>
          <span summary="sampleMean1">{{ simsummary.sampleMean1 }} </span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_means.Mean_of_Randomized_Sample_to_Group_2:" | translate
          }}</span>
          <span summary="sampleMean2">{{ simsummary.sampleMean2 }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_means.Difference_of_Means_(Randomized_Samples):" | translate
          }}</span>
          <span summary="sampleMeanDiff">{{ simsummary.sampleMeanDiff }}</span>
        </div>
      </div>
    </div>
    <div class="rhs w-9/12">
      <h3>{{ "two_means.Most_Recent_Draw" | translate }}</h3>
      <div class="chart-wrap">
        <canvas id="data-chart-3" height="200"></canvas>
      </div>
      <div class="chart-wrap">
        <canvas id="data-chart-4" height="200"></canvas>
      </div>
    </div>
  </div>
  <div class="flex justify-between">
    <h2 class="text-xl font-bold">
      {{ "two_means.Sampling_Distribution_of_Difference_of_Means" | translate }}
    </h2>
    <input
      type="checkbox"
      checked
      (change)="toggleSection($event, 'sectionThree')"
    />
  </div>
  <div class="flex gap-3" [ngClass]="sections.sectionThree ? '' : 'hidden'">
    <div class="w-3/12">
      <select
        [disabled]="!samDisActive"
        (change)="selectedTest($event)"
        class="if-disabled w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
      >
        <option value="null" disabled selected>
          {{ "two_means.Type_of_Test" | translate }}
        </option>
        <option value="oneTailRight">
          {{ "two_means.One_Tail_Right" | translate }}
        </option>
        <option value="oneTailLeft">
          {{ "two_means.One_Tail_Left" | translate }}
        </option>
        <option value="TwoTail">{{ "two_means.Two_Tails" | translate }}</option>
      </select>
      <span>{{
        "two_means.Select_differences_at_least_as_extreme_as" | translate
      }}</span>
      <input
        [disabled]="!samDisActive"
        type="number"
        id="tail-input"
        value="0"
        [(ngModel)]="mean_diff"
        step="any"
        class="w-full border if-disabled border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
      />
      <hr />
      <div class="text-sm font-medium mb-1">
        <div class="flex justify-between">
          <span>{{
            "two_means.Original_Dataset_Difference_of_Means:" | translate
          }}</span>
          <span summary="dataMeanDiff">{{ mean_diff }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Mean_of_Sample_Differences:" | translate }}</span>
          <span summary="mean">{{ simsummary.sampleMeanDiff }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Standard_Deviation:" | translate }}</span>
          <span summary="stddev">{{ lastSummary?.stddev }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.Total_#_samples:" | translate }} </span>
          <span summary="total" summaryint>{{ lastSummary?.total }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_means.#_of_Extreme_Differences:" | translate }} </span>
          <span summary="chosen" summaryint>{{ lastSummary?.chosen }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_means.Proportion_of_Extreme_Differences" | translate
          }}</span>
          <span summary="proportion">{{ lastSummary?.proportion }}</span>
        </div>
      </div>
    </div>
    <div class="rhs w-9/12">
      <canvas id="diff-chart"></canvas>
    </div>
  </div>
</div>
<app-footer></app-footer>
