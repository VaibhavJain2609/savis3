<app-navbar></app-navbar>
<div class="p-4">
  <div id="two-proportions" class="mb-4">
    <h1 class="text-2xl font-bold mb-2">
      {{ "two_proportions.Two_Proportions_Hypothesis_Testing" | translate }}
    </h1>
    <h2 class="text-xl font-bold mb-2">
      {{ "two_proportions.Enter_Data:" | translate }}
    </h2>
    <input type="checkbox" class="float-right mr-2" checked />
    <div id="input-section" class="section flex">
      <div class="lhs mr-4">
        <table class="mb-4">
          <thead>
            <tr>
              <td></td>
              <td class="desc">{{ "two_proportions.Group_A" | translate }}</td>
              <td class="desc">{{ "two_proportions.Group_B" | translate }}</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="desc">
                {{ "two_proportions.Successes" | translate }}
              </td>
              <td>
                <input
                  type="number"
                  id="a-success"
                  v-model="numASuccess"
                  min="0"
                  step="1"
                  class="border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
                />
              </td>
              <td>
                <input
                  type="number"
                  id="b-success"
                  v-model="numBSuccess"
                  min="0"
                  step="1"
                  class="border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
                />
              </td>
            </tr>
            <tr>
              <td class="desc">{{ "two_proportions.Failures" | translate }}</td>
              <td>
                <input
                  type="number"
                  id="a-failure"
                  v-model="numAFailure"
                  min="0"
                  step="1"
                  class="border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
                />
              </td>
              <td>
                <input
                  type="number"
                  id="b-failure"
                  v-model="numBFailure"
                  min="0"
                  step="1"
                  class="border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
                />
              </td>
            </tr>
          </tbody>
        </table>
        <button
          (click)="loadData()"
          class="btn border bg-primary text-white px-4 py-2 text-sm font-medium rounded-lg mb-4"
        >
          {{ "two_proportions.Load_Data" | translate }}
        </button>
        <div class="text-sm font-medium mb-3">
          <div class="flex justify-between">
            <span
              >{{
                "two_proportions.Proportion_of_Successes_in_Group_A_(pA):"
                  | translate
              }}
            </span>
            <span>{{ sampleProportionA }}</span>
          </div>
          <div class="flex justify-between">
            <span>{{
              "two_proportions.Proportion_of_Successes_in_Group_B_(pB):"
                | translate
            }}</span>
            <span>{{ sampleProportionB }}</span>
          </div>
          <div class="flex justify-between">
            <span>{{
              "two_proportions.Difference_of_Proportions_(pA_-_pB):" | translate
            }}</span>
            <span>{{ sampleProportionDiff }}</span>
          </div>
        </div>
      </div>
      <div class="rhs w-9/12">
        <div class="chart-wrap">
          <canvas id="data-chart-1" height="200"></canvas>
        </div>
      </div>
    </div>
  </div>
  <div class="flex justify-between">
    <h2 class="text-xl font-bold">
      {{ "two_proportions.Run_Simulations" | translate }}
    </h2>
    <input
      type="checkbox"
      checked
      (change)="toggleSection($event, 'sectionTwo')"
    />
  </div>
  <div class="flex gap-3" [ngClass]="sections.sectionTwo ? '' : 'hidden'">
    <div class="w-3/12">
      <h3 class="font-bold">
        {{ "two_proportions.#_of_Simulations" | translate }}
      </h3>
      <input
        [(ngModel)]="numofSem"
        [disabled]="!activateSim"
        class="w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg ng-untouched ng-pristine ng-valid"
        type="number"
        value="1"
        min="1"
        max="100"
      />
      <button
        (click)="runSim()"
        *ngIf="activateSim"
        class="mt-1 border bg-primary disabled: text-white px-7 py-1.5 text-sm font-medium rounded-lg w-full"
      >
        {{ "two_proportions.Run_Simulation" | translate }}
      </button>
      <button
        [disabled]="true"
        *ngIf="!activateSim"
        class="mt-1 border bg-gray-400 text-gray-700 px-7 py-1.5 text-sm font-medium rounded-lg w-full"
      >
        {{ "two_proportions.Run_Simulation" | translate }}
      </button>
      <div class="text-sm font-medium mb-2">
        <div class="flex justify-between">
          <span
            >{{
              "two_proportions.Proportion_of_Successes_Randomized_to_Group_A_(pA):"
                | translate
            }}
          </span>
          <span summary="sampleProportionA"
            >{{ simsummary.sampleProportionA }}
          </span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_proportions.Proportion_of_Successes_Randomized_to_Group_B_(pB):"
              | translate
          }}</span>
          <span summary="sampleProportionB">{{
            simsummary.sampleProportionB
          }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_proportions.Difference_of_Proportions_(pA_-_pB):" | translate
          }}</span>
          <span summary="sampleProportioniff">{{
            simsummary.sampleProportionDiff
          }}</span>
        </div>
      </div>
    </div>
    <div class="rhs w-9/12">
      <h3>{{ "two_proportions.Most_Recent_Draw" | translate }}</h3>
      <div class="chart-wrap">
        <canvas id="data-chart-2" height="200"></canvas>
      </div>
    </div>
  </div>
  <div class="flex justify-between">
    <h2 class="text-xl font-bold">
      {{
        "two_proportions.Sampling_Distribution_of_Difference_of_Proportions"
          | translate
      }}
    </h2>
    <input
      type="checkbox"
      checked
      (change)="toggleSection($event, 'sectionThree')"
    />
  </div>
  <div class="flex gap-3" [ngClass]="sections.sectionThree ? '' : 'hidden'">
    <div class="w-3/12">
      <select
        [disabled]="!activateSim"
        [(ngModel)]="selectedTestOption"
        name="testType"
        class="if-disabled w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"
      >
        <option value="heading" disabled selected>
          {{ "two_proportions.Type_of_Test" | translate }}
        </option>
        <option value="oneTailRight">
          {{ "two_proportions.One_Tail_Right" | translate }}
        </option>
        <option value="oneTailLeft">
          {{ "two_proportions.One_Tail_Left" | translate }}
        </option>
        <option value="TwoTail">
          {{ "two_proportions.Two_Tails" | translate }}
        </option>
      </select>
      <span>{{
        "two_proportions.Select_differences_at_least_as_extreme_as" | translate
      }}</span>
      <!-- <input [disabled]="!samDisActive" type="number" id="tail-input" [(ngModel)]="mean_diff" step="any"
       class="w-full border if-disabled border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg"> -->
      <input
        [(ngModel)]="mean_diff"
        [disabled]="!activateSim"
        class="w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg ng-untouched ng-pristine ng-valid"
        type="number"
        value="1"
        min="1"
        max="100"
      />
      <hr />
      <div class="text-sm font-medium mb-2">
        <div class="flex justify-between">
          <span>{{
            "two_proportions.Difference_of_Proportions_in_Original_Data:"
              | translate
          }}</span>
          <span summary="dataMeanDiff">{{ mean_diff }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_proportions.Mean_of_Sample_Differences:" | translate
          }}</span>
          <span summary="mean">{{ simsummary.sampleMeanDiff }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_proportions.Standard_Deviation:" | translate }}</span>
          <span summary="stddev">{{ lastSummary?.stddev }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{ "two_proportions.Total_#_samples:" | translate }} </span>
          <span summary="total" summaryint>{{ lastSummary?.total }}</span>
        </div>
        <div class="flex justify-between">
          <span
            >{{ "two_proportions.#_of_Extreme_Differences:" | translate }}
          </span>
          <span summary="chosen" summaryint>{{ lastSummary?.chosen }}</span>
        </div>
        <div class="flex justify-between">
          <span>{{
            "two_proportions.Proportion_of_Extreme_Differences" | translate
          }}</span>
          <span summary="proportion">{{ lastSummary?.proportion }}</span>
        </div>
      </div>
    </div>
    <div class="rhs w-9/12">
      <canvas id="diff-chart"></canvas>
    </div>
  </div>
</div>

<app-footer></app-footer>
