<app-navbar></app-navbar>
<div id="main-content">
    <div id="two-proportions">
      <h1>Two Proportions Hypothesis Testing</h1>
      <h2>1. Enter Data:</h2>
      <input type="checkbox" style="float:right" checked/>
      <div id="input-section" class="section">
        <div class="lhs">
          <table>
            <thead>
              <tr>
                <td></td>
                <td class="desc">Group A</td>
                <td class="desc">Group B</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="desc">Successes</td>
                <td><input type="number" id="a-success" [(ngModel)]="numASuccess" min="0" step="1"></td>
                <td><input type="number" id="b-success" [(ngModel)]="numBSuccess" min="0" step="1"></td>
              </tr>
              <tr>
                <td class="desc">Failures</td>
                <td><input type="number" id="a-failure" [(ngModel)]="numAFailure" min="0" step="1"></td>
                <td><input type="number" id="b-failure" [(ngModel)]="numBFailure" min="0" step="1"></td>
              </tr>
            </tbody>
          </table>
          <br>
          <button class="btn" (click)="loadData()">Load Data</button>
          <div class="stats">
            <div>
              <span>Proportion of Successes in Group A (p<sub>A</sub>):</span>
              <span>{{ sampleProportionA }}</span>
            </div>
            <div>
              <span>Proportion of Successes in Group B (p<sub>B</sub>):</span>
              <span>{{ sampleProportionB }}</span>
            </div>
            <div>
              <span>Difference of Proportions (p<sub>A</sub> - p<sub>B</sub>):</span>
              <span>{{ sampleProportionDiff }}</span>
            </div>
          </div>
        </div>
        <div class="rhs">
          <h3 style="margin-left: 3em">Most Recent Draw</h3>
          <table style="margin-left: 3em">
            
            <tr>
              <td style="text-align: right"><span>{{ sampleAFailure }}</span> Failures</td>
              <td rowspan="2" colspan="2">
                
                <div class="chart-wrap"><canvas id="last-sim-bars"></canvas></div>
              </td>
              <td><span>{{ sampleBFailure }}</span> Failures</td>
            </tr>
            <tr>
              <td style="text-align: right"><span>{{ sampleASuccess }}</span> Successes</td>
              <td><span>{{ sampleBSuccess }}</span> Successes</td>
            </tr>
          </table>
        </div>
      </div>

      <h2>2. Run Simulations</h2>
      <input type="checkbox" style="float:right" checked/>
      <div class="section">
       <div class="lhs">
         <label>Number of Simulations:
          <input id="num-simulations" type="number" min="1" [(ngModel)]="numSimulations" max="1000"/>
         </label>
         <button class="btn" [disabled]="!isDataLoaded" (click)="runSimulations()">Run Simulations</button>
         <div class="stats">
          <div>
            <span>Proportion of Successes Randomized to Group A (p<sub>A</sub>):</span>
            <span>{{ sampleProportionA }}</span>
          </div>
          <div>
            <span>Proportion of Successes Randomized to Group B (p<sub>B</sub>):</span>
            <span>{{ sampleProportionB }}</span>
          </div>
          <div>
            <span>Difference of Proportions (p<sub>A</sub> - p<sub>B</sub>):</span>
            <span>{{ sampleProportionDiff }}</span>
          </div>
         </div>
       </div>
       <div class="rhs">
        <h3 style="margin-left: 3em">Most Recent Draw</h3>
        <table style="margin-left: 3em">
          
          <tr>
            <td style="text-align: right"><span>{{ sampleAFailure }}</span> Failures</td>
            <td rowspan="2" colspan="2">
              
              <div class="chart-wrap"><canvas id="last-sim-bars"></canvas></div>
            </td>
            <td><span>{{ sampleBFailure }}</span> Failures</td>
          </tr>
          <tr>
            <td style="text-align: right"><span>{{ sampleASuccess }}</span> Successes</td>
            <td><span>{{ sampleBSuccess }}</span> Successes</td>
          </tr>
        </table>
       </div>
      
      </div>

      <h2>3. Sampling Distribution of Difference of Proportions</h2>
      <input type="checkbox" style="float:right" checked/>
      <div class="section flex-row">
        <div class="lhs">
            <div>
                <label for="test-type">Type of Test:</label>
                <select id="test-type" [disabled]="!isDataLoaded" (change)="onTestTypeChange()" class="w-full border border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg" [(ngModel)]="selectedTestOption">
                  <option value="null" disabled selected>Type of Test</option>
                  <option value="oneTailRight">One Tail Right</option>
                  <option value="oneTailLeft">One Tail Left</option>
                  <option value="TwoTail">Two Tails</option>
                </select>
            </div>
            <span>Select differences at least as extreme as</span>
            <input [disabled]="!samDisActive" type="number"  id="tail-input" value="0" [(ngModel)]="prop_diff" step="any"
              class="w-full border if-disabled border-gray-300 focus:border-gray-500 focus:outline-none p-2 rounded-lg">
            <hr>
      
          <div class="stats">
            <div>
              <span>Difference of Proportions in Original Data::</span>
              <span>{{ proportionDiff }}</span>
            </div>
            <div>
              <span>Mean of Sample Differences:</span>
              <span>{{ meanSampleDiffs }}</span>
            </div>
            <div>
              <span>Standard Deviation:</span>
              <span>{{ stddevSampleDiffs }}</span>
            </div>
            <div>
              <span>Total # Samples:</span>
              <span>{{ totalSamples }}</span>
            </div>
            <div>
              <span># Extreme Differences:</span>
              <span>{{ extremediff }}</span>
            </div>
            <div>
              <span>Proportion Extreme Differences:</span>
              <span>{{ propextremediff }}</span>
            </div>
          </div>
        </div>
        <div class="rhs">
          <canvas id="prop_diff" style="height:300px"></canvas>
        </div>
      </div>

    </div>
  </div>
<app-footer></app-footer>  
    
  
